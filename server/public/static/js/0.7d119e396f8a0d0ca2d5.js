(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{397:function(t,e,i){var s=i(7)(i(453),i(454),null,null);t.exports=s.exports},399:function(t,e,i){i(458);var s=i(7)(i(459),i(460),null,null);t.exports=s.exports},402:function(t,e,i){i(469);var s=i(7)(i(470),i(471),null,null);t.exports=s.exports},404:function(t,e,i){i(475);var s=i(7)(i(476),i(477),null,null);t.exports=s.exports},405:function(t,e,i){i(478);var s=i(7)(i(479),i(480),"data-v-ca846402",null);t.exports=s.exports},411:function(t,e,i){i(496);var s=i(7)(i(497),i(498),null,null);t.exports=s.exports},413:function(t,e,i){i(502);var s=i(7)(i(503),i(504),null,null);t.exports=s.exports},414:function(t,e,i){i(505);var s=i(7)(i(506),i(510),null,null);t.exports=s.exports},417:function(t,e){"use strict";e.a={data:function(){var t=this;return{title:t.$t("niceLinksStr"),siteTitle:t.$t("niceLinksStr"),titleTemplate:"%s | "+this.$t("niceLinksStr"),keywords:t.$t("keywords"),description:t.$t("description")}},created:function(){},metaInfo:function(){var e=this,t=this.title?this.title+" - "+this.siteTitle:""+this.siteTitle;return{title:this.title,titleTemplate:function(t){return t?t+" - "+e.siteTitle:""+e.siteTitle},meta:[{vmid:"title",name:"title",content:t},{vmid:"keywords",name:"keywords",content:this.keywords},{vmid:"description",name:"description",content:this.description},{vmid:"og:type",property:"og:type",content:"website"},{vmid:"og:title",property:"og:title",content:t},{vmid:"og:image",property:"og:image",content:"https://static.nicelinks.site/static/img/favicons/favicon.png"},{vmid:"og:keywords",property:"og:keywords",content:this.keywords},{vmid:"og:description",property:"og:description",content:this.description}]}},mounted:function(){},methods:{}}},453:function(t,e,i){"use strict";i.r(e);var s=i(417);e["default"]={name:"Setting",mixins:[s.a],components:{},data:function(){var t=this;return{title:t.$t("resetPwd"),isLoading:!1,isShowFillPwd:!1,fillForm:{email:"",password:""},tipMessageObj:{message:"",type:""},operateFun:{"/forgot-pwd":"requestResetPwd","/reset-pwd":"launchResetPwd"},rules:{email:[{required:!0,validator:this.validateEmail,trigger:"change,blur"}],password:[{required:!0,validator:this.validatePassword,trigger:"change,blur"}]}}},mounted:function(){this.$util.getUrlParam("resetPasswordToken")&&(this.isShowFillPwd=!0)},methods:{launchRequest:function(e){var i=this;this.$refs.validateForm.validate(function(t){t&&(i.isLoading=!1,i.$apis.requestResetPwd(e).then(function(t){i.tipMessageObj={message:t,type:"success"}}).catch(function(t){i.isLoading=!1,i.tipMessageObj={message:t,type:"error"}}))})},validateEmail:function(t,e,i){!e||0>=e.length?i(new Error(this.$t("enterEmailTip"))):this.$util.isLegalEmail(e)?i():i(new Error(this.$t("enterLegalEmailTip")))},validatePassword:function(t,e,i){!e||0>=e.length?i(new Error(this.$t("enterPwdTip"))):this.$util.isLegalPassword(e)?i():i(new Error(this.$t("enterLegalPwdTip")))},requestResetPwd:function(){var t={email:this.fillForm.email};this.launchRequest(t)},launchResetPwd:function(){var t={resetPasswordToken:this.$util.getUrlParam("resetPasswordToken"),password:this.$util.encryptPwd(this.fillForm.password),email:this.$util.getUrlParam("email")};this.launchRequest(t)},onResetClick:function(){this[this.operateFun[this.$route.path]]()}},locales:{zh:{resetPwd:"重设密码",registeredMailbox:"注册邮箱",resetNewPwd:"设新密码"},en:{resetPwd:"Reset Password",registeredMailbox:"Registered Mailbox",resetNewPwd:"Reset New Password"}}}},454:function(t){t.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.isLoading,expression:"isLoading",modifiers:{body:!0}}],staticClass:"panel-default"},[i("div",{staticClass:"panel-body"},[i("div",{staticClass:"main-container"},[i("div",{staticClass:"entry-list"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v(e._s(e.$t("homePage")))]),e._v(" "),i("el-breadcrumb-item",[e._v(e._s(e.$t("resetPwd")))])],1)],1),e._v(" "),e.tipMessageObj.message?i("div",{staticClass:"form-group"},[i("el-alert",{attrs:{title:e.tipMessageObj.message,type:e.tipMessageObj.type}})],1):e._e(),e._v(" "),i("el-form",{ref:"validateForm",attrs:{model:e.fillForm,rules:e.rules}},[e.isShowFillPwd?i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-3 control-label"},[e._v(e._s(e.$t("resetNewPwd"))+":")]),e._v(" "),i("div",{staticClass:"col-sm-9"},[i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{placeholder:"",type:"password"},model:{value:e.fillForm.password,callback:function(t){e.$set(e.fillForm,"password","string"==typeof t?t.trim():t)},expression:"fillForm.password"}})],1)],1)]):i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-3 control-label"},[e._v(e._s(e.$t("registeredMailbox"))+":")]),e._v(" "),i("div",{staticClass:"col-sm-9"},[i("el-form-item",{attrs:{prop:"email"}},[i("el-input",{attrs:{placeholder:""},model:{value:e.fillForm.email,callback:function(t){e.$set(e.fillForm,"email","string"==typeof t?t.trim():t)},expression:"fillForm.email"}})],1)],1)])]),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-sm-offset-3 col-sm-9"},[i("el-button",{attrs:{type:"primary"},on:{click:e.onResetClick}},[e._v(e._s(e.$t("resetPwd")))])],1)])],1)],1),e._v(" "),i("aside-list")],1)])])])},staticRenderFns:[]}},458:function(){},459:function(t,e,i){"use strict";i.r(e);var s=i(417),a=i(46),n=i.n(a);e["default"]={name:"HomePage",mixins:[s.a],components:{PreviewMd:n.a},data:function(){var t=this;return{title:t.$t("homepage"),isLoading:!1,isShowBaseInfo:!0,activeName:"BaseInfo",myLinksList:[],mUserInfo:{profile:{}},nicerNumText:"",tabApiObj:{MyPublish:"getMyPublish",MyLikes:"getMyLikes",MyDislikes:"getMyDislikes"},tabDataObj:{MyPublish:null,MyLikes:null,MyDislikes:null}}},computed:{isUserSelf:function(){return this.userInfo&&this.userInfo.username===this.$route.params.id},userAvatar:function(){if(this.mUserInfo){var t=this.mUserInfo.profile&&this.mUserInfo.profile.avatar;return t?"/api/avatar/"+t:"https://image.nicelinks.site/default-avatar.jpeg"}}},created:function(){this.getUserInfoByUsername()},watch:{$lang:function(){this.updateDetailInfo()}},methods:{getUserInfoByUsername:function(){var e=this;this.isLoading=!0;var t={username:this.$route.params.id};this.$apis.getUserInfo(t).then(function(t){e.mUserInfo=t,e.updateDetailInfo()}).catch(function(t){e.$message.error(""+t)}).finally(function(){e.isLoading=!1})},updateDetailInfo:function(){var t=this.$t("nicerNumText").replace("@X",this.mUserInfo.number||1),e=this.mUserInfo.activeTime||this.mUserInfo.createdAt;e=new Date(e).Format("yyyy-MM-dd hh:mm:ss"),this.nicerNumText=t.replace("@TIME",e)},requestApiUpdateList:function(e){var i=this;if(this.tabDataObj[e])return void(this.myLinksList=this.tabDataObj[e]);var t=this.tabApiObj[e],s={username:this.$route.params.id,userId:this.userInfo&&this.userInfo._id||""};this.isLoading=!0,this.$apis[t](s).then(function(t){i.myLinksList=i.tabDataObj[e]=t,i.isLoading=!1}).catch(function(t){i.$message.error(""+t),i.isLoading=!0})},handleClick:function(t){this.isShowBaseInfo="BaseInfo"===t.name,"BaseInfo"!==t.name&&this.requestApiUpdateList(t.name)},onLinkClick:function(t){t.website?document.location.href=t.website:""}},locales:{en:{baseInfo:"Base Information",myPublish:"My Publish",myLikes:"My Likes",myDislikes:"My Dislikes",hisPublish:"His Publish",hisLikes:"His Likes",hisDislikes:"His Dislikes",nicerNumText:"<a href='/'>NICE LINKS</a> Member No. @X, Join in @TIME",noFill:"Not yet filled"},zh:{baseInfo:"基本信息",myPublish:"我的发布",myLikes:"我的点赞",myDislikes:"我的狂踩",hisPublish:"他的发布",hisLikes:"他的点赞",hisDislikes:"他的狂踩",nicerNumText:"<a href='/'>倾城之链</a>第 @X 号成员，加入于 @TIME",noFill:"暂未填写"}}}},460:function(t){t.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper homepage"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"panel-default"},[i("div",{staticClass:"panel-body"},[i("div",{staticClass:"main-container"},[i("div",{staticClass:"entry-list"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v(e._s(e.$t("homePage")))]),e._v(" "),i("el-breadcrumb-item",[e._v(e._s(e.$t("homepage")))])],1)],1),e._v(" "),i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{name:"BaseInfo",label:e.isUserSelf?e.$t("baseInfo"):e.$t("baseInfo")}}),e._v(" "),i("el-tab-pane",{attrs:{name:"MyPublish",label:e.isUserSelf?e.$t("myPublish"):e.$t("hisPublish")}}),e._v(" "),i("el-tab-pane",{attrs:{name:"MyLikes",label:e.isUserSelf?e.$t("myLikes"):e.$t("hisLikes")}}),e._v(" "),e.isUserSelf?i("el-tab-pane",{attrs:{name:"MyDislikes",label:e.isUserSelf?e.$t("myDislikes"):e.$t("hisDislikes")}}):e._e()],1),e._v(" "),e.isShowBaseInfo?i("el-card",{staticClass:"box-card base-info"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("img",{staticClass:"avatar",attrs:{src:e.userAvatar,alt:e.$t("niceLinksStr")}}),e._v(" "),i("div",{staticClass:"info"},[i("p",{staticClass:"username"},[e._v(e._s(e.mUserInfo.username))]),e._v(" "),e.mUserInfo.profile.nickname?i("p",{staticClass:"nickname"},[e._v("\n                    "+e._s(e.mUserInfo.profile.nickname)+"\n                  ")]):e._e(),e._v(" "),i("span",{staticClass:"gray",domProps:{innerHTML:e._s(e.nicerNumText)}})])]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-3 control-label"},[e._v(e._s(e.$t("personalWebsite"))+":")]),e._v(" "),i("div",{staticClass:"col-sm-9"},[e.mUserInfo.profile.website?i("el-button",{attrs:{type:"text"},on:{click:function(){return e.onLinkClick(e.mUserInfo.profile)}}},[e._v("\n                    "+e._s(e.mUserInfo.profile.website)+"\n                  ")]):i("p",{staticClass:"text-padding gray"},[e._v("\n                    "+e._s(e.$t("noFill"))+"\n                  ")])],1)]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-3 control-label"},[e._v(e._s(e.$t("profile"))+":")]),e._v(" "),i("div",{staticClass:"col-sm-9"},[i("preview-md",{attrs:{value:e.mUserInfo.profile.description||e.$t("noFill")}}),e._v(" "),i("p",{staticClass:"text-padding gray"})],1)])]):i("links-list",{attrs:{pdata:e.myLinksList,"is-abstract":!0,"is-loading":e.isLoading}})],1)],1),e._v(" "),i("aside-list")],1)])])])},staticRenderFns:[]}},469:function(){},470:function(t,e,i){"use strict";i.r(e);var s=i(417);e["default"]={name:"TagsCollections",mixins:[s.a],data:function(){var t=this;return{title:t.$t("tagsCollection"),isLoading:!1,tagsList:[]}},watch:{},created:function(){var e=this;this.$apis.getAllTags().then(function(t){e.tagsList=e.$_.flattenDepth(t.sort())}).catch(function(t){e.isLoading=!1,e.$message.error(""+t)})},mounted:function(){},methods:{onItemClick:function(t){this.$router.push("/tags/"+t)}}}},471:function(t){t.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper",attrs:{id:"tags-coll-page"}},[i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.isLoading,expression:"isLoading",modifiers:{body:!0}}],staticClass:"panel-default"},[i("div",{staticClass:"panel-body"},[i("div",{staticClass:"main-container"},[i("div",{staticClass:"entry-list"},[i("h3",{staticClass:"classify-title"},[e._v(e._s(e.$t("tagsCollection")))]),e._v(" "),e._l(e.tagsList,function(t){return i("el-button",{key:t,staticClass:"radius-btn",attrs:{type:"text"},on:{click:function(){return e.onItemClick(t)}}},[e._v(e._s(t)+"\n          ")])})],2),e._v(" "),i("aside-list")],1)])])])},staticRenderFns:[]}},475:function(){},476:function(t,e,i){"use strict";i.r(e);var s=i(5),a=i(417);e["default"]={name:"ThemeCollections",mixins:[a.a],data:function(){var t=this;return{title:t.$t("themeCollection"),isLoading:!1,classifyList:s["default"].classify,themeList:s["default"].theme}},watch:{},created:function(){},mounted:function(){},methods:{onItemClick:function(t){this.$switchRouteByTheme(t.value)}}}},477:function(t){t.exports={render:function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"wrapper",attrs:{id:"theme-coll-page"}},[s("div",{directives:[{name:"loading",rawName:"v-loading.body",value:i.isLoading,expression:"isLoading",modifiers:{body:!0}}],staticClass:"panel-default"},[s("div",{staticClass:"panel-body"},[s("div",{staticClass:"main-container"},[s("div",{staticClass:"entry-list"},[s("h3",{staticClass:"classify-title"},[i._v(i._s(i.$t("themeCollection")))]),i._v(" "),i._l(i.themeList,function(t,e){return s("div",{key:e},i._l(t,function(t){return s("el-button",{key:t.value,staticClass:"radius-btn",attrs:{type:"text"},on:{click:function(){return i.onItemClick(t)}}},[i._v("\n              "+i._s(t.key)+"\n            ")])}),1)})],2),i._v(" "),s("aside-list")],1)])])])},staticRenderFns:[]}},478:function(){},479:function(t,e,i){"use strict";i.r(e);var s=i(5),a=i(417),n=i(120),r=i.n(n);e["default"]={name:"ShareLink",mixins:[a.a],data:function(){var t=this;return{title:t.$t("shareNewLink"),isLoading:!1,fillForm:{urlPath:"",title:"",desc:"",keywords:"",classify:"",theme:"",tags:[],review:""},themeList:[],tagsList:s["default"].tags,classifyList:s["default"].classify,rules:{urlPath:[{required:!0,validator:this.$verifyUrl,trigger:"change,blur"}],title:[{required:!0,message:this.$t("pleaseEnter")+this.$t("linkNameStr"),trigger:"change,blur"}],theme:[{required:!0,message:this.$t("pleaseSelect")+this.$t("linkThemeStr"),trigger:"change,blur"}],classify:[{required:!0,message:this.$t("pleaseSelect")+this.$t("linkClassifyStr"),trigger:"change,blur"}]}}},props:{value:{type:Boolean,default:!1}},components:{Markdown:r.a},computed:{},watch:{"fillForm.classify":function(){this.themeList=s["default"].theme[this.fillForm.classify]||[]}},methods:{getLinkPageData:function(){var e=this;this.fillForm.urlPath&&(!this.$_.endsWith(this.fillForm.urlPath,"/")&&(this.fillForm.urlPath+="/"),this.$apis.crawlLinksInfo({url:this.fillForm.urlPath}).then(function(t){e.fillForm.title=t.title,e.fillForm.desc=t.desc,e.fillForm.keywords=t.keywords}).catch(function(t){e.$message.error(""+t)}))},resetForm:function(){this.$refs.fillForm.resetFields()},onResetClick:function(){this.resetForm()},onPublishClick:function(){var i=this;this.$refs.fillForm.validate(function(t){if(t){i.isLoading=!0;var e=i.$_.clone(i.fillForm,!0);e.userId=i.userInfo&&i.userInfo._id,e.role=i.userInfo&&i.userInfo.role,e.createdBy=i.userInfo&&i.userInfo.username,i.$apis.addNiceLinks(e).then(function(){i.isLoading=!1,i.$message({message:i.$t("successAddTip"),type:"success"}),i.resetForm()}).catch(function(t){console.log(t),i.isLoading=!1,i.$message.error(""+t)})}})}},locales:{en:{successAddTip:"Well, you have successfully added the link，Pending audit."},zh:{successAddTip:"很好，您已成功添加该链接，正在待审核中."}}}},480:function(t){t.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper",attrs:{id:"share-link"}},[i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.isLoading,expression:"isLoading",modifiers:{body:!0}}],staticClass:"panel-default"},[i("div",{staticClass:"panel-body"},[i("div",{staticClass:"main-container"},[i("div",{staticClass:"entry-list"},[i("h3",{staticClass:"share-title"},[e._v(e._s(e.$t("shareNewLink")))]),e._v(" "),i("section",{staticClass:"form form-horizontal"},[i("el-form",{ref:"fillForm",attrs:{model:e.fillForm,rules:e.rules}},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-sm-12"},[i("el-form-item",{attrs:{prop:"urlPath"}},[i("el-input",{attrs:{placeholder:e.$t("pleaseEnter")+e.$t("linkAddressStr")},on:{blur:e.getLinkPageData},model:{value:e.fillForm.urlPath,callback:function(t){e.$set(e.fillForm,"urlPath",t)},expression:"fillForm.urlPath"}})],1)],1)]),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-sm-12"},[i("el-form-item",{attrs:{prop:"title"}},[i("el-input",{attrs:{placeholder:e.$t("pleaseEnter")+e.$t("linkNameStr")},model:{value:e.fillForm.title,callback:function(t){e.$set(e.fillForm,"title",t)},expression:"fillForm.title"}})],1)],1)]),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-sm-12"},[i("el-form-item",{attrs:{prop:"classify"}},[i("el-select",{staticClass:"wrap-block",attrs:{placeholder:e.$t("pleaseSelect")+e.$t("linkClassifyStr")},model:{value:e.fillForm.classify,callback:function(t){e.$set(e.fillForm,"classify",t)},expression:"fillForm.classify"}},e._l(e.classifyList,function(t){return i("el-option",{key:t.value,attrs:{label:e.$t(t.name),value:t.value}})}),1)],1)],1)]),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-sm-12"},[i("el-form-item",{attrs:{prop:"theme"}},[i("el-select",{staticClass:"wrap-block",attrs:{placeholder:e.$t("pleaseSelect")+e.$t("linkThemeStr")},model:{value:e.fillForm.theme,callback:function(t){e.$set(e.fillForm,"theme",t)},expression:"fillForm.theme"}},e._l(e.themeList,function(t){return i("el-option",{key:t.key,attrs:{label:"en"===e.$getCurrentLang()?t.value:t.key,value:t.value}})}),1)],1)],1)]),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-sm-12"},[i("el-form-item",{attrs:{prop:"tags"}},[i("el-select",{staticClass:"wrap-block",attrs:{"allow-create":"",multiple:"",filterable:"","multiple-limit":3,placeholder:e.$t("pleaseSelect")+e.$t("linkTagsStr")},model:{value:e.fillForm.tags,callback:function(t){e.$set(e.fillForm,"tags",t)},expression:"fillForm.tags"}},e._l(e.tagsList,function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1)],1)]),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-sm-12"},[i("el-form-item",{attrs:{prop:"keywords"}},[i("el-input",{attrs:{type:"textarea",maxlength:360,autosize:{minRows:3,maxRows:10},placeholder:e.$t("linkKeywordStr")},model:{value:e.fillForm.keywords,callback:function(t){e.$set(e.fillForm,"keywords",t)},expression:"fillForm.keywords"}})],1)],1)]),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-sm-12"},[i("el-form-item",{attrs:{prop:"desc"}},[i("el-input",{attrs:{type:"textarea",maxlength:360,autosize:{minRows:5,maxRows:10},placeholder:e.$t("linkDescStr")},model:{value:e.fillForm.desc,callback:function(t){e.$set(e.fillForm,"desc",t)},expression:"fillForm.desc"}})],1)],1)]),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"col-sm-12"},[i("el-form-item",{attrs:{prop:"review"}},[i("markdown",{attrs:{placeholder:e.$t("linkReviewStr")},model:{value:e.fillForm.review,callback:function(t){e.$set(e.fillForm,"review",t)},expression:"fillForm.review"}})],1)],1)])])],1),e._v(" "),i("div",{staticClass:"operate-area"},[i("el-button",{on:{click:e.onResetClick}},[e._v("\n              "+e._s(this.$t("reset"))+"\n            ")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.onPublishClick}},[e._v("\n              "+e._s(this.$t("publish"))+"\n            ")])],1)]),e._v(" "),i("aside-list")],1)])])])},staticRenderFns:[]}},496:function(){},497:function(t,e,i){"use strict";i.r(e);var s=i(23),a=i.n(s),n=i(152),r=i.n(n),l=i(5),o=i(417);e["default"]={name:"ManageLinks",mixins:[o.a],data:function(){var t=this;return{title:t.$t("manageLinks"),isLoading:!1,isShowDlgFlag:!1,activeName:"first",classifyList:l["default"].classify,themeList:l["default"].theme,tableData:[],tableControl:{totalCount:30,pageCount:1,pageSize:20,sortType:-1,sortTarget:"created"},currentRowData:{}}},components:{EditDialog:r.a},created:function(){this.initFetch()},watch:{activeName:function(){this.initFetch()}},methods:{initFetch:function(){var e=this,t={};a()(t,this.tableControl),t.active="first"!==this.activeName,this.isLoading=!0,this.$apis.getAllLinks(t).then(function(t){e.isLoading=!1,e.tableData=t}).catch(function(t){e.isLoading=!1,e.$message.error(""+t)}).finally(function(){e.isLoading=!1}),this.$apis.getAllLinksCount(t).then(function(t){e.tableControl.totalCount=t}).catch(function(t){console.log(t)})},fillThemeName:function(t,e){var i="";return this.themeList[t].map(function(t){t.value===e&&(i=t.key)}),i},handleClick:function(){},handleSizeChange:function(t){this.tableControl.pageSize=t,this.initFetch()},handleCurrentChange:function(t){console.log(t),this.tableControl.pageCount=t,this.initFetch()},handleEdit:function(t){this.isShowDlgFlag=!0,this.currentRowData=t},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除该条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.operatorId=e.userInfo&&e.userInfo._id,e.isLoading=!0,e.$apis.deleteNiceLinks(t).then(function(){e.$message({type:"success",message:"删除成功!"}),e.initFetch(),e.isLoading=!1}).catch(function(t){e.isLoading=!1,e.$message.error(""+t)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},onUpdateSuccess:function(){this.initFetch()},onCreaterClick:function(t){this.$router.push("/member/"+t)}},locales:{en:{approved:"Approved",unapproved:"Unapproved",isActived:"Is Actived",creater:"Creater"},zh:{approved:"已审核",unapproved:"未审核",isActived:"是否已激活",creater:"创建者"}}}},498:function(t){t.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper",attrs:{id:"manage-links"}},[i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.isLoading,expression:"isLoading",modifiers:{body:!0}}],staticClass:"panel-default"},[i("div",{staticClass:"panel-body"},[i("div",{staticClass:"main-container"},[i("div",{staticClass:"entry-list"},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:e.$t("unapproved"),name:"first"}}),e._v(" "),i("el-tab-pane",{attrs:{label:e.$t("approved"),name:"second"}})],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[i("el-table-column",{attrs:{prop:"classify",label:e.$t("linkClassifyStr"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.$t(e.classifyList[t.row.classify].name))+"\n              ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"createdBy",label:e.$t("creater"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(){return e.onCreaterClick(t.row.createdBy)}}},[e._v("\n                  "+e._s(t.row.createdBy)+"\n                ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"theme",label:e.$t("linkThemeStr"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.fillThemeName(t.row.classify,t.row.theme))+"\n              ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"urlPath",label:e.$t("linkAddressStr"),"min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("a",{staticClass:"title-link",attrs:{href:t.row.urlPath,target:"_blank",rel:"noopener"}},[e._v("\n                  "+e._s(t.row.title)+"\n                ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"created",label:e.$t("createdDateStr"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateConvert")(t.row.created)))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("operation"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small"},on:{click:function(){return e.handleEdit(t.row)}}},[e._v(e._s(e.$t("edit")))]),e._v(" "),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(){return e.handleDelete(t.row)}}},[e._v(e._s(e.$t("delete")))])]}}])})],1),e._v(" "),i("div",{staticClass:"table-operate"},[i("el-pagination",{attrs:{total:e.tableControl.totalCount,"current-page":e.tableControl.pageCount,"page-size":e.tableControl.pageSize,"page-sizes":[20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])])]),e._v(" "),i("edit-dialog",{attrs:{pdata:e.currentRowData},on:{"update-success":e.onUpdateSuccess},model:{value:e.isShowDlgFlag,callback:function(t){e.isShowDlgFlag=t},expression:"isShowDlgFlag"}})],1)},staticRenderFns:[]}},502:function(){},503:function(t,e,i){"use strict";i.r(e);var s=i(417);e["default"]={name:"ManageAdverts",mixins:[s.a],data:function(){var t=this;return{title:t.$t("manageAdverts"),isLoading:!1,tableData:[]}},components:{},created:function(){this.initFetch()},watch:{},methods:{initFetch:function(){var e=this;this.isLoading=!0,this.$apis.getAdverts({}).then(function(t){e.isLoading=!1,e.tableData=t}).catch(function(t){e.isLoading=!1,e.$message.error(""+t)}).finally(function(){e.isLoading=!1})},handleSave:function(t){var e=this;this.isLoading=!0,this.$apis.updateAdverts(t).then(function(){e.isLoading=!1,e.$message({message:"已成功保存",type:"success"})}).catch(function(t){e.isLoading=!1,e.$message.error(""+t)}).finally(function(){e.isLoading=!1})},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除该条目, 是否继续?",this.$t("warmReminder"),{confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"}).then(function(){e.isLoading=!0,e.$apis.removeAdverts(t).then(function(){e.$message({message:"已成功删除",type:"success"}),e.initFetch()}).catch(function(t){e.isLoading=!1,e.$message.error(""+t)})}).catch(function(){})},onAddAdsClick:function(){this.tableData.push({path:"",image:"",alt:"",active:!0,sort:0,modifyTime:new Date})}},locales:{en:{approved:"Approved",unapproved:"Unapproved",isActived:"Is Actived",creater:"Creater"},zh:{approved:"已审核",unapproved:"未审核",isActived:"是否已激活",creater:"创建者"}}}},504:function(t){t.exports={render:function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"wrapper",attrs:{id:"manage-users"}},[s("div",{directives:[{name:"loading",rawName:"v-loading.body",value:i.isLoading,expression:"isLoading",modifiers:{body:!0}}],staticClass:"panel-default"},[s("div",{staticClass:"panel-body"},[s("div",{staticClass:"main-container"},[s("div",{staticClass:"entry-list"},[s("el-carousel",{staticClass:"jade-gg-body",attrs:{trigger:"click","indicator-position":"outside",interval:3600,height:"256px"}},i._l(i.tableData,function(t,e){return s("el-carousel-item",{key:e},[s("a",{attrs:{href:t.path,target:"_blank",rel:"noopener"}},[s("img",{attrs:{src:t.image,alt:i.$t("niceLinksStr")}})])])}),1),i._v(" "),s("div",{staticClass:"form-group"},[s("el-button",{attrs:{plain:!0,type:"success",size:"large"},on:{click:i.onAddAdsClick}},[i._v("添加广告\n            ")])],1),i._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:i.tableData,stripe:""}},[s("el-table-column",{attrs:{prop:"path",label:"地址","min-width":"200"},scopedSlots:i._u([{key:"default",fn:function(e){return[s("el-input",{model:{value:e.row.path,callback:function(t){i.$set(e.row,"path",t)},expression:"scope.row.path"}})]}}])}),i._v(" "),s("el-table-column",{attrs:{prop:"image",label:"图片","min-width":"200"},scopedSlots:i._u([{key:"default",fn:function(e){return[s("el-input",{model:{value:e.row.image,callback:function(t){i.$set(e.row,"image",t)},expression:"scope.row.image"}})]}}])}),i._v(" "),s("el-table-column",{attrs:{prop:"image",label:"描述","min-width":"160"},scopedSlots:i._u([{key:"default",fn:function(e){return[s("el-input",{model:{value:e.row.alt,callback:function(t){i.$set(e.row,"alt",t)},expression:"scope.row.alt"}})]}}])}),i._v(" "),s("el-table-column",{attrs:{prop:"image",label:"排序","min-width":"100"},scopedSlots:i._u([{key:"default",fn:function(e){return[s("el-input",{model:{value:e.row.sort,callback:function(t){i.$set(e.row,"sort",t)},expression:"scope.row.sort"}})]}}])}),i._v(" "),s("el-table-column",{attrs:{prop:"active",label:i.$t("isActived"),width:"100"},scopedSlots:i._u([{key:"default",fn:function(e){return[s("el-switch",{attrs:{"on-text":i.$t("yes"),"off-text":i.$t("no"),"on-color":"#13ce66","off-color":"#ff4949"},model:{value:e.row.active,callback:function(t){i.$set(e.row,"active",t)},expression:"scope.row.active"}})]}}])}),i._v(" "),s("el-table-column",{attrs:{prop:"modifyTime",label:"修改时间",width:"160"},scopedSlots:i._u([{key:"default",fn:function(t){return[i._v("\n                "+i._s(i._f("dateConvert")(t.row.modifyTime))+"\n              ")]}}])}),i._v(" "),s("el-table-column",{attrs:{label:i.$t("operation"),width:"160"},scopedSlots:i._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"small"},on:{click:function(){return i.handleSave(t.row)}}},[i._v(i._s(i.$t("save"))+"\n                ")]),i._v(" "),s("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(){return i.handleDelete(t.row)}}},[i._v(i._s(i.$t("delete"))+"\n                ")])]}}])})],1)],1)])])])])},staticRenderFns:[]}},505:function(){},506:function(t,e,i){"use strict";i.r(e);var s=i(23),a=i.n(s),n=i(507),r=i.n(n),l=i(5),o=i(417);e["default"]={name:"ManageSentences",mixins:[o.a],data:function(){var t=this;return{title:t.$t("manageSentences"),isLoading:!1,isShowDlgFlag:!1,activeName:"first",tableData:[],totalCount:0,tableControl:{pageCount:1,pageSize:20,sortType:-1,sortTarget:"createTime"},currentRowData:{}}},components:{SentencesDialog:r.a},computed:{sentencesTypeList:function(){var e=this;return l["default"].sentences.map(function(t){return{text:t.text[e.$lang],value:t.value}})}},created:function(){this.initFetch()},watch:{activeName:function(){this.initFetch()}},methods:{initFetch:function(){this.requestSentences(),this.requestSentencesCount()},requestSentences:function(){var e=this,t={};a()(t,this.tableControl),t.active="first"===this.activeName,this.isLoading=!0,this.$apis.getSentences(t).then(function(t){e.isLoading=!1,e.tableData=t}).catch(function(t){e.isLoading=!1,e.$message.error(""+t)}).finally(function(){e.isLoading=!1})},requestSentencesCount:function(){var e=this,t={active:"first"===this.activeName};this.$apis.getSentencesCount(t).then(function(t){e.totalCount=t}).catch(function(t){e.$message.error(""+t)})},fillThemeName:function(t,e){var i="";return this.themeList[t].map(function(t){t.value===e&&(i=t.key)}),i},getSentenceTypeName:function(e){return this.sentencesTypeList.filter(function(t){return t.value===e})[0].text},handleClick:function(){},handleSizeChange:function(t){this.tableControl.pageSize=t,this.initFetch()},handleCurrentChange:function(t){console.log(t),this.tableControl.pageCount=t,this.initFetch()},handleEdit:function(t){this.isShowDlgFlag=!0,this.currentRowData=t},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除该条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.operatorId=e.userInfo&&e.userInfo._id,e.isLoading=!0,e.$apis.removeSentences(t).then(function(){e.$message({type:"success",message:"删除成功!"}),e.initFetch(),e.isLoading=!1}).catch(function(t){e.isLoading=!1,e.$message.error(""+t)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},onUpdateSuccess:function(){this.initFetch()},onCreaterClick:function(t){this.$router.push("/member/"+t)}},locales:{en:{approved:"Approved",unapproved:"Unapproved",isActived:"Is Actived",creater:"Creater"},zh:{approved:"已审核",unapproved:"未审核",isActived:"是否已激活",creater:"创建者"}}}},507:function(t,e,i){var s=i(7)(i(508),i(509),null,null);t.exports=s.exports},508:function(t,e,i){"use strict";i.r(e);var s=i(5),a=i(120),n=i.n(a);e["default"]={name:"EditDialog",data:function(){return{isShowDlgFlag:!1,isLoading:!1,fillForm:{type:"",content:"",active:!1},rules:{content:[{required:!0,message:this.$t("pleaseEnter")+this.$t("linkNameStr"),trigger:"change,blur"}],type:[{required:!0,message:this.$t("pleaseSelect")+this.$t("type"),trigger:"change,blur"}]}}},components:{Markdown:n.a},props:{value:{type:Boolean,default:!1},pdata:{type:Object,default:{}}},computed:{sentencesTypeList:function(){var e=this;return s["default"].sentences.map(function(t){return{text:t.text[e.$lang],value:t.value}})}},watch:{value:function(t){this.isShowDlgFlag=t},isShowDlgFlag:function(t){t||(this.fillForm={type:"",content:"",active:!1}),this.$emit("input",t)},pdata:function(t){this.fillForm=this.$_.cloneDeep(t)}},methods:{onCommitClick:function(){var i=this;this.$refs.fillForm.validate(function(t){if(t){i.isLoading=!0;var e=i.$_.clone(i.fillForm,!0);e.managerId=i.userInfo&&i.userInfo._id,e.createdBy=i.userInfo&&i.userInfo.username,e.managerRole=i.userInfo&&i.userInfo.role,i.$apis.updateSentences(e).then(function(){i.isLoading=!1,i.isShowDlgFlag=!1,i.$message({message:i.$t("successAddTip"),type:"success"}),i.$emit("update-success")}).catch(function(t){console.log(t),i.isLoading=!1,i.$message.error(""+t)})}})}},locales:{en:{successAddTip:"Well, you have successfully updated the sentence"},zh:{successAddTip:"干的漂亮，您已成功更新该箴言"}}}},509:function(t){t.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"edit-dialog"}},[i("el-dialog",{directives:[{name:"loading",rawName:"v-loading.body",value:e.isLoading,expression:"isLoading",modifiers:{body:!0}}],attrs:{stripe:"",title:e.$t("shareNewSentences"),visible:e.isShowDlgFlag,size:"small"},on:{"update:visible":function(t){e.isShowDlgFlag=t}}},[i("div",{staticClass:"form form-horizontal"},[i("el-form",{ref:"fillForm",attrs:{model:e.fillForm,rules:e.rules}},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-3 control-label"},[e._v(" "+e._s(this.$t("type"))+" "),i("em",[e._v("*")]),e._v("：")]),e._v(" "),i("div",{staticClass:"col-sm-8"},[i("el-form-item",{attrs:{prop:"type"}},[i("el-select",{staticClass:"wrap-block",attrs:{placeholder:this.$t("pleaseSelect")+this.$t("type")},model:{value:e.fillForm.type,callback:function(t){e.$set(e.fillForm,"type",t)},expression:"fillForm.type"}},e._l(e.sentencesTypeList,function(t){return i("el-option",{key:t.value,attrs:{label:e.$t(t.text),value:t.value}})}),1)],1)],1)]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-3 control-label"},[e._v(" "+e._s(this.$t("content"))+" ：")]),e._v(" "),i("div",{staticClass:"col-sm-8"},[i("markdown",{attrs:{placeholder:this.$t("pleaseSelect")+this.$t("content")},model:{value:e.fillForm.content,callback:function(t){e.$set(e.fillForm,"content",t)},expression:"fillForm.content"}})],1)]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-3 control-label"},[e._v(" "+e._s(this.$t("isAcive"))+" ：")]),e._v(" "),i("div",{staticClass:"col-sm-8"},[i("el-switch",{attrs:{"on-text":e.$t("yes"),"off-text":e.$t("no"),"on-color":"#13ce66","off-color":"#ff4949"},model:{value:e.fillForm.active,callback:function(t){e.$set(e.fillForm,"active",t)},expression:"fillForm.active"}})],1)])])],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(){e.isShowDlgFlag=!1}}},[e._v(e._s(this.$t("cancel")))]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.onCommitClick}},[e._v(e._s(this.$t("confirm")))])],1)])],1)},staticRenderFns:[]}},510:function(t){t.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper",attrs:{id:"manage-sentences"}},[i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.isLoading,expression:"isLoading",modifiers:{body:!0}}],staticClass:"panel-default"},[i("div",{staticClass:"panel-body"},[i("div",{staticClass:"main-container"},[i("el-button",{attrs:{round:"",icon:"el-icon-plus"},on:{click:function(){e.isShowDlgFlag=!0}}},[e._v("\n          "+e._s(e.$t("shareNewSentences"))+"\n        ")]),e._v(" "),i("div",{staticClass:"sentences-list"},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:e.$t("approved"),name:"first"}}),e._v(" "),i("el-tab-pane",{attrs:{label:e.$t("unapproved"),name:"second"}})],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[i("el-table-column",{attrs:{prop:"type",label:e.$t("type"),width:"100",filters:e.sentencesTypeList,"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{class:t.row.type+"-color",attrs:{"disable-transitions":""}},[e._v(e._s(e.getSentenceTypeName(t.row.type))+"\n                ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"content",label:e.$t("content"),"show-overflow-tooltip":"","min-width":"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"createdBy",label:e.$t("creater"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(){return e.onCreaterClick(t.row.createdBy)}}},[e._v("\n                  "+e._s(t.row.createdBy)+"\n                ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:e.$t("createdDateStr"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateConvert")(t.row.createTime)))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("operation"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small"},on:{click:function(){return e.handleEdit(t.row)}}},[e._v(e._s(e.$t("edit")))]),e._v(" "),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(){return e.handleDelete(t.row)}}},[e._v(e._s(e.$t("delete")))])]}}])})],1),e._v(" "),i("div",{staticClass:"table-operate"},[i("el-pagination",{attrs:{total:e.totalCount,"current-page":e.tableControl.pageCount,"page-size":e.tableControl.pageSize,"page-sizes":[20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)])]),e._v(" "),i("sentences-dialog",{attrs:{pdata:e.currentRowData},on:{"update-success":e.onUpdateSuccess},model:{value:e.isShowDlgFlag,callback:function(t){e.isShowDlgFlag=t},expression:"isShowDlgFlag"}})],1)},staticRenderFns:[]}},511:function(){},512:function(t,e,i){"use strict";i.r(e);var s=i(417);e["default"]={name:"Login",data:function(){return{isLoading:!1,checkLoading:!1,tipMessageObj:{},account:{email:"",username:"",userinfo:"",password:""},isLegalUsername:!1,rules:{username:[{required:!0,validator:this.validateUsername,trigger:"change,blur"}],email:[{required:!0,validator:this.validateEmail,trigger:"change,blur"}],userinfo:[{required:!0,validator:this.validateUserinfo,trigger:"change,blur"}],password:[{required:!0,validator:this.validatePassword,trigger:"change,blur"}]}}},mixins:[s.a],created:function(){},mounted:function(){this.updatePageTitle(this.isSignUpPage)},components:{},computed:{isSignUpPage:function(){return"/register"===this.$route.path}},watch:{isSignUpPage:function(t){this.updatePageTitle(t)}},methods:{updatePageTitle:function(t){var e=t?"signUp":"signIn";this.title=this.$t(e)},setMessageTip:function(t){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"error";this.tipMessageObj={message:t,type:e}},queryUsername:function(){var e=this;this.checkLoading=!0;var t={username:this.account.username};this.$apis.checkIsExisted(t).then(function(){e.isLegalUsername=!0,e.checkLoading=!1,e.setMessageTip(null)}).catch(function(t){e.checkLoading=!1,e.isLegalUsername=!1,e.setMessageTip(t)})},validateUsername:function(t,e,i){if(!e||0>=e.length)return i(new Error(this.$t("enterUsernameTip")));return this.$util.isLegalUsername(e)?void i():i(new Error(this.$t("enterLegalUsernameTip")))},validateUserinfo:function(t,e,i){return!e||0>=e.length?i(new Error(this.$t("enterUserinfoTip"))):void i()},validateEmail:function(t,e,i){!e||0>=e.length?i(new Error(this.$t("enterEmailTip"))):this.$util.isLegalEmail(e)?i():i(new Error(this.$t("enterLegalEmailTip")))},validatePassword:function(t,e,i){return this.isSignUpPage?void(!e||0>=e.length?i(new Error(this.$t("enterPwdTip"))):this.$util.isLegalPassword(e)?i():i(new Error(this.$t("enterLegalPwdTip")))):void i()},onKeyEnterClick:function(){var t=this.isSignUpPage?"onSignupClick":"onLoginClick";this[t]()},onLoginClick:function(){var s=this;this.$gtagTracking("signin","login","login-signin"),this.isLoading=!0,this.$refs.validateForm.validate(function(t){if(t){var e=s.$util.isLegalEmail(s.account.userinfo),i={email:e?s.account.userinfo:"",username:e?"":s.account.userinfo,password:s.$util.encryptPwd(s.account.password)};s.$apis.login(i).then(function(t){s.$vuexSetUserInfo(t);var e=s.$store&&s.$store.state.lastPathUrl;e?document.location.href=e:s.$router.push("/")}).catch(function(t){s.isLoading=!1,s.setMessageTip(t)})}else return s.isLoading=!1,!1})},onSignupClick:function(){var i=this;this.$gtagTracking("signup","register","register-signup"),this.$refs.validateForm.validate(function(t){if(t){i.isLoading=!1;var e={email:i.account.email,username:i.account.username,password:i.$util.encryptPwd(i.account.password)};i.$apis.signup(e).then(function(t){i.setMessageTip(t,"success")}).catch(function(t){i.isLoading=!1,i.setMessageTip(t)})}else return!1})},onForgotPwdClick:function(){this.$gtagTracking("forgot-pwd","login","forgot-pwd"),this.$router.push("/forgot-pwd")},onBottomClick:function(){var t=this.isSignUpPage?["signin","register","register-signin"]:["register","login","login-register"];this.$gtagTracking.apply(this,t),this.$router.push(this.isSignUpPage?"/login":"/register")},onBlurUsername:function(){this.isSignUpPage&&this.queryUsername()}},locales:{en:{enterUsernameTip:"Please enter username(Only letters and numbers，3-16)",enterUserinfoTip:"Please enter username Or email",enterLegalUsernameTip:"Please enter username(Only letters and numbers，3-16)",signupBottomTip:"Don't have an account ?",signinBottomTip:"Already have an account?"},zh:{enterUsernameTip:"请输入用户名(仅限字母和数字，3至16位)",enterUserinfoTip:"请输入用户名或邮箱",enterLegalUsernameTip:"请输入用户名(仅限字母和数字，3至16位)",signupBottomTip:"你已拥有一个账号？",signinBottomTip:"还未拥有一个账号？"}}}},513:function(t){t.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login-wrap"},[i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.isLoading,expression:"isLoading",modifiers:{body:!0}}],staticClass:"login-box"},[i("a",{staticClass:"nicelinks-logo gtag-track",attrs:{href:"/explore/all","data-action":"login-logo-link","data-category":"login","data-label":"login-logo-link"}},[i("img",{attrs:{src:"/static/img/favicons/safari-pinned-tab.svg",alt:e.$t("niceLinksStr")}}),e._v(" "),i("h1",[e._v(e._s(e.$t("niceLinksStr")))])]),e._v(" "),i("div",{staticClass:"form-group"},[e.tipMessageObj.message?i("el-alert",{attrs:{title:e.tipMessageObj.message,type:e.tipMessageObj.type}}):e._e()],1),e._v(" "),i("el-form",{ref:"validateForm",attrs:{model:e.account,rules:e.rules}},[e.isSignUpPage?i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{attrs:{icon:e.checkLoading?"loading":"",autofocus:!0},on:{blur:e.onBlurUsername},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onKeyEnterClick(t)}},model:{value:e.account.username,callback:function(t){e.$set(e.account,"username","string"==typeof t?t.trim():t)},expression:"account.username"}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"login-user"}})],1)],2)],1):e._e(),e._v(" "),e.isSignUpPage?i("el-form-item",{attrs:{prop:"email"}},[i("el-input",{nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onKeyEnterClick(t)}},model:{value:e.account.email,callback:function(t){e.$set(e.account,"email","string"==typeof t?t.trim():t)},expression:"account.email"}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"login-email"}})],1)],2)],1):e._e(),e._v(" "),e.isSignUpPage?e._e():i("el-form-item",{attrs:{prop:"userinfo"}},[i("el-input",{nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onKeyEnterClick(t)}},model:{value:e.account.userinfo,callback:function(t){e.$set(e.account,"userinfo","string"==typeof t?t.trim():t)},expression:"account.userinfo"}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"login-user"}})],1)],2)],1),e._v(" "),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{type:"password"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onKeyEnterClick(t)}},model:{value:e.account.password,callback:function(t){e.$set(e.account,"password",t)},expression:"account.password"}},[i("template",{slot:"prepend"},[i("icon",{staticClass:"icons",attrs:{name:"password"}})],1)],2)],1),e._v(" "),e.isSignUpPage?i("el-button",{attrs:{size:"large"},on:{click:e.onSignupClick}},[e._v(e._s(e.$t("signUp")))]):i("el-button",{attrs:{type:"primary",size:"large"},on:{click:e.onLoginClick}},[e._v(e._s(e.$t("signIn")))]),e._v(" "),this.isSignUpPage?e._e():i("el-button",{attrs:{type:"text",size:"large"},on:{click:e.onForgotPwdClick}},[e._v(e._s(e.$t("forgetPwd")))])],1)],1),e._v(" "),i("div",{staticClass:"form-group login-bottom-tip"},[i("p",{staticClass:"text-center"},[e._v("\n      "+e._s(e.isSignUpPage?e.$t("signupBottomTip"):e.$t("signinBottomTip"))+"\n      "),i("a",{staticClass:"el-button--text",attrs:{href:"javascript:;"},on:{click:e.onBottomClick}},[e._v("\n        "+e._s(e.isSignUpPage?e.$t("signIn"):e.$t("signUp")))])])])])},staticRenderFns:[]}},519:function(t,e,i){i(511);var s=i(7)(i(512),i(513),null,null);t.exports=s.exports}}]);